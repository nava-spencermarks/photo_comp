{% extends "base.html" %}

{% block content %}
<div class="card">
    <form method="POST" action="{{ url_for('compare_faces') }}" enctype="multipart/form-data">
        <div class="image-container">
            <div class="image-box">
                <h3>First Image</h3>
                <div class="upload-area">
                    <div class="form-group">
                        <label for="image1">Choose first image:</label>
                        <input type="file" id="image1" name="image1" class="file-input" 
                               accept="image/*" required>
                    </div>
                    <p class="upload-hint">
                        Supported formats: PNG, JPG, JPEG, GIF, BMP
                    </p>
                </div>
                <div class="image-canvas-container" id="canvas-container-1">
                    <div class="image-wrapper">
                        <img id="preview1" class="image-preview">
                        <canvas id="canvas1" class="canvas-overlay"></canvas>
                    </div>
                    <div class="canvas-controls">
                        <div class="mask-controls">
                            <div class="mask-controls-title">Mask Areas:</div>
                            <div class="mask-buttons">
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_top" data-image-id="1">Top Bar</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_middle" data-image-id="1">Middle Bar</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_bottom" data-image-id="1">Bottom Bar</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_left" data-image-id="1">Left Side</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_right" data-image-id="1">Right Side</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_center" data-image-id="1">Center</button>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button type="button" class="btn-small btn-clear-masks btn-red" data-image-id="1">üóëÔ∏è Clear All</button>
                            <button type="button" class="btn-small btn-flip-image btn-purple" data-preview-id="preview1">üîÑ Flip Upside Down</button>
                        </div>
                        <div class="mask-hint">
                            <div>Click buttons to add rectangle masks</div>
                            <div class="mask-hint-detail">
                                Active masks show with darker buttons
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="image-box">
                <h3>Second Image</h3>
                <div class="upload-area">
                    <div class="form-group">
                        <label for="image2">Choose second image:</label>
                        <input type="file" id="image2" name="image2" class="file-input" 
                               accept="image/*" required>
                    </div>
                    <p class="upload-hint">
                        Supported formats: PNG, JPG, JPEG, GIF, BMP
                    </p>
                </div>
                <div class="image-canvas-container" id="canvas-container-2">
                    <div class="image-wrapper">
                        <img id="preview2" class="image-preview">
                        <canvas id="canvas2" class="canvas-overlay"></canvas>
                    </div>
                    <div class="canvas-controls">
                        <div class="mask-controls">
                            <div class="mask-controls-title">Mask Areas:</div>
                            <div class="mask-buttons">
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_top" data-image-id="2">Top Bar</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_middle" data-image-id="2">Middle Bar</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_bottom" data-image-id="2">Bottom Bar</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_left" data-image-id="2">Left Side</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_right" data-image-id="2">Right Side</button>
                                <button type="button" class="mask-btn mask-btn-purple" data-mask-type="rect_center" data-image-id="2">Center</button>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button type="button" class="btn-small btn-clear-masks btn-red" data-image-id="2">üóëÔ∏è Clear All</button>
                            <button type="button" class="btn-small btn-flip-image btn-purple" data-preview-id="preview2">üîÑ Flip Upside Down</button>
                        </div>
                        <div class="mask-hint">
                            <div>Click buttons to add rectangle masks</div>
                            <div class="mask-hint-detail">
                                Active masks show with darker buttons
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="submit-section">
            <button type="submit" class="btn">
                üîç Compare Faces
            </button>
        </div>
    </form>
</div>

<div class="card">
    <h3 class="instructions-title">How it works:</h3>
    <ol class="instructions-list">
        <li>Upload two images containing faces</li>
        <li>Our AI analyzes the facial features in both images</li>
        <li>Get instant results showing if it's the same person</li>
        <li>View detailed comparison metrics</li>
    </ol>
</div>

<!-- External JavaScript Files -->
<script src="{{ url_for('static', filename='js/rectangle-patterns.js') }}"></script>
<script src="{{ url_for('static', filename='js/mask-state.js') }}"></script>
<script src="{{ url_for('static', filename='js/mask-utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/mouse-handlers.js') }}"></script>
<script src="{{ url_for('static', filename='js/mask-operations.js') }}"></script>
<script src="{{ url_for('static', filename='js/image-preview.js') }}"></script>
<script src="{{ url_for('static', filename='js/button-handlers.js') }}"></script>
<script src="{{ url_for('static', filename='js/form-submission.js') }}"></script>
{% endblock %}